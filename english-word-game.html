<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëã±ËØ≠ÂçïËØçÈóØÂÖ≥Ê∏∏Êàè</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .menu-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .notebook-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #9c88ff 0%, #8c7ae6 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .notebook-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 136, 255, 0.4);
        }

        .game-header {
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 10px;
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            color: white;
        }

        .level-display {
            font-size: 1.3em;
            font-weight: bold;
        }

        .progress-display {
            font-size: 1.1em;
        }

        .score-display {
            font-size: 1.1em;
        }

        .level-selector {
            margin-bottom: 30px;
        }

        .level-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            margin: 8px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .level-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .level-btn.completed {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .level-btn.locked {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .level-btn.locked::after {
            content: 'üîí';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
        }

        .level-btn.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .audio-controls {
            margin-bottom: 30px;
        }

        .play-sound-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .play-sound-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .icons-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .icon-option {
            border: 3px solid #ddd;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 160px;
            position: relative;
            overflow: hidden;
        }

        .icon-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .icon-option:hover::before {
            left: 100%;
        }

        .icon-option:hover {
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .icon-option.correct {
            border-color: #28a745;
            box-shadow: 0 0 25px rgba(40, 167, 69, 0.4);
            background: linear-gradient(135deg, #f8fff9 0%, #e8f5e8 100%);
            animation: correctPulse 0.6s ease-in-out;
        }

        .icon-option.incorrect {
            border-color: #dc3545;
            animation: shake 0.6s ease-in-out;
            background: linear-gradient(135deg, #fff8f8 0%, #ffe8e8 100%);
        }

        .icon-option.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .icon-emoji {
            font-size: 3.5em;
            margin-bottom: 8px;
            transition: transform 0.3s ease;
        }

        .icon-option:hover .icon-emoji {
            transform: scale(1.1);
        }

        .icon-label {
            font-size: 1.1em;
            color: #666;
            font-weight: 500;
        }

        .result-display {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border-left: 5px solid #28a745;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-display.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .word-display {
            font-size: 2.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .chinese-display {
            font-size: 1.5em;
            color: #666;
            margin-bottom: 20px;
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .level-complete {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .level-complete.show {
            display: flex;
        }

        .complete-modal {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: modalPop 0.5s ease-out;
        }

        @keyframes modalPop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .complete-title {
            font-size: 2.5em;
            color: #28a745;
            margin-bottom: 20px;
        }

        .complete-stats {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }

        .continue-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .speaker-icon {
            width: 20px;
            height: 20px;
        }

        .category-selector {
            margin-bottom: 30px;
        }

        .category-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .category-btn.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .error-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            z-index: 999;
            animation: errorShake 0.6s ease-in-out;
        }

        .error-message.show {
            display: block;
        }

        @keyframes errorShake {
            0%, 100% { transform: translate(-50%, -50%) translateX(0); }
            25% { transform: translate(-50%, -50%) translateX(-10px); }
            75% { transform: translate(-50%, -50%) translateX(10px); }
        }

        .success-celebration {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 998;
        }

        .success-celebration.show {
            display: block;
        }

        .flower {
            position: absolute;
            font-size: 2em;
            animation: flowerFall 3s ease-out forwards;
        }

        @keyframes flowerFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .success-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 999;
            animation: successBounce 1s ease-in-out;
        }

        .success-message.show {
            display: block;
        }

        @keyframes successBounce {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notebook-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }

        .notebook-modal.show {
            display: flex;
        }

        .notebook-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalPop 0.5s ease-out;
        }

        .notebook-title {
            font-size: 2em;
            color: #8c7ae6;
            margin-bottom: 20px;
        }

        .notebook-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            text-align: left;
            border-left: 4px solid #8c7ae6;
        }

        .notebook-word {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .notebook-chinese {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 5px;
        }

        .notebook-category {
            font-size: 0.9em;
            color: #8c7ae6;
            font-weight: bold;
        }

        .close-notebook-btn {
            background: linear-gradient(135deg, #8c7ae6 0%, #9c88ff 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .close-notebook-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(140, 122, 230, 0.4);
        }

        .notebook-empty {
            color: #666;
            font-size: 1.2em;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .icons-grid {
                grid-template-columns: 1fr;
            }
            
            .game-title {
                font-size: 2em;
            }
            
            .icon-emoji {
                font-size: 3em;
            }
            
            .level-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .menu-btn {
                top: 10px;
                right: 10px;
                padding: 8px 16px;
                font-size: 0.8em;
            }
            
            .notebook-btn {
                top: 10px;
                left: 10px;
                padding: 8px 16px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <button class="notebook-btn" id="notebookBtn" style="display: none;">üìö ÈîôÈ¢òÊú¨</button>
        <button class="menu-btn" id="menuBtn" style="display: none;">üè† ‰∏ªËèúÂçï</button>
        
        <div class="game-header">
            <h1 class="game-title">üéØ ÂçïËØçÂõæÊ†áÈóØÂÖ≥Ê∏∏Êàè</h1>
            
            <div class="category-selector" id="categorySelector">
                <h3>ÈÄâÊã©Á±ªÂà´:</h3>
                <button class="category-btn" data-category="animals">üê± Âä®Áâ©</button>
                <button class="category-btn" data-category="vehicles">üöó ‰∫§ÈÄöÂ∑•ÂÖ∑</button>
                <button class="category-btn" data-category="fruits">üçé Ê∞¥Êûú</button>
                <button class="category-btn" data-category="colors">üé® È¢úËâ≤</button>
                <button class="category-btn" data-category="numbers">üî¢ Êï∞Â≠ó</button>
                <button class="category-btn" data-category="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ÂÆ∂Â∫≠</button>
            </div>

            <div class="level-selector" id="levelSelector" style="display: none;">
                <h3>ÈÄâÊã©ÂÖ≥Âç°:</h3>
                <div id="levelButtons"></div>
            </div>
        </div>

        <div class="level-info" id="levelInfo" style="display: none;">
            <div class="level-display">Á¨¨ <span id="currentLevel">1</span> ÂÖ≥</div>
            <div class="progress-display">ËøõÂ∫¶: <span id="currentProgress">0</span> / <span id="totalWords">6</span></div>
            <div class="score-display">ÂæóÂàÜ: <span id="score">0</span></div>
        </div>

        <div class="game-area" id="gameArea">
            <div class="audio-controls">
                <button class="play-sound-btn" id="playSoundBtn">
                    <svg class="speaker-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    Êí≠ÊîæÂçïËØç
                </button>
            </div>

            <div class="icons-grid" id="iconsGrid">
                <!-- ÂõæÊ†áÈÄâÈ°πÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
            </div>

            <div class="result-display" id="resultDisplay">
                <div class="word-display" id="wordDisplay"></div>
                <div class="chinese-display" id="chineseDisplay"></div>
                <button class="next-btn" id="nextBtn">‰∏ã‰∏Ä‰∏™ÂçïËØç</button>
            </div>
        </div>
    </div>

    <!-- ÈîôËØØÊèêÁ§∫ -->
    <div class="error-message" id="errorMessage">
        ‚ùå ÈÄâÊã©ÈîôËØØÔºåËØ∑ÈáçÊñ∞ÈÄâÊã©ÔºÅ
    </div>

    <!-- ÊàêÂäüÊèêÁ§∫ -->
    <div class="success-message" id="successMessage">
        üéâ ÈÄâÊã©Ê≠£Á°ÆÔºÅÂ§™Ê£í‰∫ÜÔºÅ
    </div>

    <!-- ÊàêÂäüÂ∫ÜÁ•ùÂä®Áîª -->
    <div class="success-celebration" id="successCelebration"></div>

    <!-- ÂÖ≥Âç°ÂÆåÊàêÂºπÁ™ó -->
    <div class="level-complete" id="levelComplete">
        <div class="complete-modal">
            <div class="complete-title">üéâ ÂÖ≥Âç°ÂÆåÊàê!</div>
            <div class="complete-stats">
                <div>Á¨¨ <span id="completedLevel">1</span> ÂÖ≥</div>
                <div>ÂæóÂàÜ: <span id="completedScore">0</span> / <span id="completedTotal">0</span></div>
                <div>Ê≠£Á°ÆÁéá: <span id="accuracy">0</span>%</div>
            </div>
            <button class="continue-btn" id="continueBtn">ÁªßÁª≠‰∏ã‰∏ÄÂÖ≥</button>
        </div>
    </div>

    <!-- ÈîôÈ¢òÊú¨ÂºπÁ™ó -->
    <div class="notebook-modal" id="notebookModal">
        <div class="notebook-content">
            <div class="notebook-title">üìö ÊàëÁöÑÈîôÈ¢òÊú¨</div>
            <div id="notebookContent">
                <div class="notebook-empty">ÊöÇÊó†ÈîôÈ¢òÔºåÁªßÁª≠Âä†Ê≤πÔºÅ</div>
            </div>
            <button class="close-notebook-btn" id="closeNotebookBtn">ÂÖ≥Èó≠</button>
        </div>
    </div>

    <script>
        // Ê∏∏ÊàèÊï∞ÊçÆ
        const gameData = {
            animals: [
                { word: 'cat', chinese: 'Áå´', icon: 'üê±' },
                { word: 'dog', chinese: 'Áãó', icon: 'üê∂' },
                { word: 'elephant', chinese: 'Â§ßË±°', icon: 'üêò' },
                { word: 'lion', chinese: 'ÁãÆÂ≠ê', icon: 'ü¶Å' },
                { word: 'tiger', chinese: 'ËÄÅËôé', icon: 'üêØ' },
                { word: 'rabbit', chinese: 'ÂÖîÂ≠ê', icon: 'üê∞' },
                { word: 'bird', chinese: 'È∏ü', icon: 'üê¶' },
                { word: 'fish', chinese: 'È±º', icon: 'üê†' },
                { word: 'monkey', chinese: 'Áå¥Â≠ê', icon: 'üêµ' },
                { word: 'panda', chinese: 'ÁÜäÁå´', icon: 'üêº' },
                { word: 'pig', chinese: 'Áå™', icon: 'üê∑' },
                { word: 'cow', chinese: 'Áâõ', icon: 'üêÆ' },
                { word: 'horse', chinese: 'È©¨', icon: 'üê¥' },
                { word: 'sheep', chinese: 'Áæä', icon: 'üêë' },
                { word: 'mouse', chinese: 'ËÄÅÈº†', icon: 'üê≠' },
                { word: 'bear', chinese: 'ÁÜä', icon: 'üêª' },
                { word: 'wolf', chinese: 'Áãº', icon: 'üê∫' },
                { word: 'fox', chinese: 'ÁãêÁã∏', icon: 'ü¶ä' },
                { word: 'deer', chinese: 'Èπø', icon: 'ü¶å' },
                { word: 'zebra', chinese: 'ÊñëÈ©¨', icon: 'ü¶ì' }
            ],
            vehicles: [
                { word: 'car', chinese: 'Ê±ΩËΩ¶', icon: 'üöó' },
                { word: 'bus', chinese: 'ÂÖ¨‰∫§ËΩ¶', icon: 'üöå' },
                { word: 'train', chinese: 'ÁÅ´ËΩ¶', icon: 'üöÇ' },
                { word: 'airplane', chinese: 'È£ûÊú∫', icon: '‚úàÔ∏è' },
                { word: 'boat', chinese: 'Ëàπ', icon: 'üö§' },
                { word: 'bicycle', chinese: 'Ëá™Ë°åËΩ¶', icon: 'üö≤' },
                { word: 'motorcycle', chinese: 'Êë©ÊâòËΩ¶', icon: 'üèçÔ∏è' },
                { word: 'truck', chinese: 'Âç°ËΩ¶', icon: 'üöö' },
                { word: 'taxi', chinese: 'Âá∫ÁßüËΩ¶', icon: 'üöï' },
                { word: 'subway', chinese: 'Âú∞ÈìÅ', icon: 'üöá' },
                { word: 'helicopter', chinese: 'Áõ¥ÂçáÊú∫', icon: 'üöÅ' },
                { word: 'ship', chinese: 'ËΩÆËàπ', icon: 'üö¢' },
                { word: 'rocket', chinese: 'ÁÅ´ÁÆ≠', icon: 'üöÄ' },
                { word: 'ambulance', chinese: 'ÊïëÊä§ËΩ¶', icon: 'üöë' },
                { word: 'police', chinese: 'Ë≠¶ËΩ¶', icon: 'üöì' },
                { word: 'fire', chinese: 'Ê∂àÈò≤ËΩ¶', icon: 'üöí' },
                { word: 'tractor', chinese: 'ÊãñÊãâÊú∫', icon: 'üöú' },
                { word: 'scooter', chinese: 'ÊªëÊùøËΩ¶', icon: 'üõ¥' },
                { word: 'tram', chinese: 'ÊúâËΩ®ÁîµËΩ¶', icon: 'üöä' },
                { word: 'van', chinese: 'Èù¢ÂåÖËΩ¶', icon: 'üöê' }
            ],
            fruits: [
                { word: 'apple', chinese: 'ËãπÊûú', icon: 'üçé' },
                { word: 'banana', chinese: 'È¶ôËïâ', icon: 'üçå' },
                { word: 'orange', chinese: 'Ê©ôÂ≠ê', icon: 'üçä' },
                { word: 'grape', chinese: 'Ëë°ËêÑ', icon: 'üçá' },
                { word: 'strawberry', chinese: 'ËçâËéì', icon: 'üçì' },
                { word: 'watermelon', chinese: 'Ë•øÁìú', icon: 'üçâ' },
                { word: 'pineapple', chinese: 'Ëè†Ëêù', icon: 'üçç' },
                { word: 'peach', chinese: 'Ê°ÉÂ≠ê', icon: 'üçë' },
                { word: 'cherry', chinese: 'Ê®±Ê°É', icon: 'üçí' },
                { word: 'mango', chinese: 'ËäíÊûú', icon: 'ü•≠' },
                { word: 'coconut', chinese: 'Ê§∞Â≠ê', icon: 'ü••' },
                { word: 'lemon', chinese: 'Êü†Ê™¨', icon: 'üçã' },
                { word: 'pear', chinese: 'Ê¢®', icon: 'üçê' },
                { word: 'kiwi', chinese: 'ÁåïÁå¥Ê°É', icon: 'ü•ù' },
                { word: 'avocado', chinese: 'ÁâõÊ≤πÊûú', icon: 'ü•ë' },
                { word: 'tomato', chinese: 'Áï™ËåÑ', icon: 'üçÖ' },
                { word: 'cucumber', chinese: 'ÈªÑÁìú', icon: 'ü•í' },
                { word: 'carrot', chinese: 'ËÉ°ËêùÂçú', icon: 'ü•ï' },
                { word: 'corn', chinese: 'ÁéâÁ±≥', icon: 'üåΩ' },
                { word: 'broccoli', chinese: 'Ë•øÂÖ∞Ëä±', icon: 'ü•¶' }
            ],
            colors: [
                { word: 'red', chinese: 'Á∫¢Ëâ≤', icon: 'üî¥' },
                { word: 'blue', chinese: 'ËìùËâ≤', icon: 'üîµ' },
                { word: 'green', chinese: 'ÁªøËâ≤', icon: 'üü¢' },
                { word: 'yellow', chinese: 'ÈªÑËâ≤', icon: 'üü°' },
                { word: 'purple', chinese: 'Á¥´Ëâ≤', icon: 'üü£' },
                { word: 'orange', chinese: 'Ê©ôËâ≤', icon: 'üü†' },
                { word: 'black', chinese: 'ÈªëËâ≤', icon: '‚ö´' },
                { word: 'white', chinese: 'ÁôΩËâ≤', icon: '‚ö™' },
                { word: 'pink', chinese: 'Á≤âËâ≤', icon: 'ü©∑' },
                { word: 'brown', chinese: 'Ê£ïËâ≤', icon: 'ü§é' },
                { word: 'gray', chinese: 'ÁÅ∞Ëâ≤', icon: '‚ö´' },
                { word: 'gold', chinese: 'ÈáëËâ≤', icon: 'üü°' },
                { word: 'silver', chinese: 'Èì∂Ëâ≤', icon: '‚ö™' },
                { word: 'cyan', chinese: 'ÈùíËâ≤', icon: 'üîµ' },
                { word: 'magenta', chinese: 'Ê¥ãÁ∫¢', icon: 'üü£' },
                { word: 'lime', chinese: 'ÈÖ∏Ê©ô', icon: 'üü¢' },
                { word: 'navy', chinese: 'Êµ∑ÂÜõËìù', icon: 'üîµ' },
                { word: 'teal', chinese: 'ËìùÁªøËâ≤', icon: 'üîµ' },
                { word: 'maroon', chinese: 'Ê†óËâ≤', icon: 'ü§é' },
                { word: 'olive', chinese: 'Ê©ÑÊ¶ÑËâ≤', icon: 'üü¢' }
            ],
            numbers: [
                { word: 'one', chinese: '‰∏Ä', icon: '1Ô∏è‚É£' },
                { word: 'two', chinese: '‰∫å', icon: '2Ô∏è‚É£' },
                { word: 'three', chinese: '‰∏â', icon: '3Ô∏è‚É£' },
                { word: 'four', chinese: 'Âõõ', icon: '4Ô∏è‚É£' },
                { word: 'five', chinese: '‰∫î', icon: '5Ô∏è‚É£' },
                { word: 'six', chinese: 'ÂÖ≠', icon: '6Ô∏è‚É£' },
                { word: 'seven', chinese: '‰∏É', icon: '7Ô∏è‚É£' },
                { word: 'eight', chinese: 'ÂÖ´', icon: '8Ô∏è‚É£' },
                { word: 'nine', chinese: '‰πù', icon: '9Ô∏è‚É£' },
                { word: 'ten', chinese: 'ÂçÅ', icon: 'üîü' },
                { word: 'zero', chinese: 'Èõ∂', icon: '0Ô∏è‚É£' },
                { word: 'hundred', chinese: 'Áôæ', icon: 'üíØ' },
                { word: 'thousand', chinese: 'ÂçÉ', icon: 'üî¢' },
                { word: 'million', chinese: 'Áôæ‰∏á', icon: 'üí∞' },
                { word: 'billion', chinese: 'ÂçÅ‰∫ø', icon: 'üíµ' },
                { word: 'first', chinese: 'Á¨¨‰∏Ä', icon: 'ü•á' },
                { word: 'second', chinese: 'Á¨¨‰∫å', icon: 'ü•à' },
                { word: 'third', chinese: 'Á¨¨‰∏â', icon: 'ü•â' },
                { word: 'fourth', chinese: 'Á¨¨Âõõ', icon: '4Ô∏è‚É£' },
                { word: 'fifth', chinese: 'Á¨¨‰∫î', icon: '5Ô∏è‚É£' }
            ],
            family: [
                { word: 'father', chinese: 'Áà∏Áà∏', icon: 'üë®' },
                { word: 'mother', chinese: 'Â¶àÂ¶à', icon: 'üë©' },
                { word: 'brother', chinese: 'ÂÖÑÂºü', icon: 'üë¶' },
                { word: 'sister', chinese: 'ÂßêÂ¶π', icon: 'üëß' },
                { word: 'baby', chinese: 'Â©¥ÂÑø', icon: 'üë∂' },
                { word: 'grandpa', chinese: 'Áà∑Áà∑', icon: 'üë¥' },
                { word: 'grandma', chinese: 'Â•∂Â•∂', icon: 'üëµ' },
                { word: 'family', chinese: 'ÂÆ∂Â∫≠', icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶' },
                { word: 'boy', chinese: 'Áî∑Â≠©', icon: 'üë¶' },
                { word: 'girl', chinese: 'Â•≥Â≠©', icon: 'üëß' },
                { word: 'man', chinese: 'Áî∑‰∫∫', icon: 'üë®' },
                { word: 'woman', chinese: 'Â•≥‰∫∫', icon: 'üë©' },
                { word: 'son', chinese: 'ÂÑøÂ≠ê', icon: 'üë¶' },
                { word: 'daughter', chinese: 'Â•≥ÂÑø', icon: 'üëß' },
                { word: 'husband', chinese: '‰∏àÂ§´', icon: 'üë®' },
                { word: 'wife', chinese: 'Â¶ªÂ≠ê', icon: 'üë©' },
                { word: 'uncle', chinese: 'ÂèîÂèî', icon: 'üë®' },
                { word: 'aunt', chinese: 'ÈòøÂß®', icon: 'üë©' },
                { word: 'cousin', chinese: 'Â†ÇÂÖÑÂºü', icon: 'üë¶' },
                { word: 'nephew', chinese: '‰æÑÂ≠ê', icon: 'üë¶' }
            ]
        };

        // Ê∏∏ÊàèÁä∂ÊÄÅ
        let currentCategory = '';
        let currentLevel = 1;
        let currentWord = null;
        let score = 0;
        let levelScore = 0;
        let completedLevels = [];
        let usedWords = [];
        let levelWords = [];
        let canSelect = true;
        let wrongWords = []; // ÈîôÈ¢òÊú¨Êï∞ÊçÆ

        // DOM ÂÖÉÁ¥†
        const menuBtn = document.getElementById('menuBtn');
        const notebookBtn = document.getElementById('notebookBtn');
        const categorySelector = document.getElementById('categorySelector');
        const levelSelector = document.getElementById('levelSelector');
        const levelButtons = document.getElementById('levelButtons');
        const levelInfo = document.getElementById('levelInfo');
        const gameArea = document.getElementById('gameArea');
        const iconsGrid = document.getElementById('iconsGrid');
        const resultDisplay = document.getElementById('resultDisplay');
        const wordDisplay = document.getElementById('wordDisplay');
        const chineseDisplay = document.getElementById('chineseDisplay');
        const playSoundBtn = document.getElementById('playSoundBtn');
        const nextBtn = document.getElementById('nextBtn');
        const levelComplete = document.getElementById('levelComplete');
        const continueBtn = document.getElementById('continueBtn');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const successCelebration = document.getElementById('successCelebration');
        const notebookModal = document.getElementById('notebookModal');
        const notebookContent = document.getElementById('notebookContent');
        const closeNotebookBtn = document.getElementById('closeNotebookBtn');

        // ÂàùÂßãÂåñÊ∏∏Êàè
        function initGame() {
            // ÂàùÂßãÂåñËØ≠Èü≥ÂêàÊàê
            initSpeechSynthesis();
            
            // ÁªëÂÆöÁ±ªÂà´ÊåâÈíÆ‰∫ã‰ª∂
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.dataset.category;
                    selectCategory(category);
                });
            });

            // ÁªëÂÆöÊí≠ÊîæÂ£∞Èü≥ÊåâÈíÆ‰∫ã‰ª∂
            playSoundBtn.addEventListener('click', playWordSound);

            // ÁªëÂÆö‰∏ã‰∏Ä‰∏™ÊåâÈíÆ‰∫ã‰ª∂
            nextBtn.addEventListener('click', nextWord);

            // ÁªëÂÆöÁªßÁª≠ÊåâÈíÆ‰∫ã‰ª∂
            continueBtn.addEventListener('click', nextLevel);

            // ÁªëÂÆö‰∏ªËèúÂçïÊåâÈíÆ‰∫ã‰ª∂
            menuBtn.addEventListener('click', returnToMainMenu);

            // ÁªëÂÆöÈîôÈ¢òÊú¨ÊåâÈíÆ‰∫ã‰ª∂
            notebookBtn.addEventListener('click', showNotebook);

            // ÁªëÂÆöÂÖ≥Èó≠ÈîôÈ¢òÊú¨ÊåâÈíÆ‰∫ã‰ª∂
            closeNotebookBtn.addEventListener('click', hideNotebook);
        }

        // ËøîÂõû‰∏ªËèúÂçï
        function returnToMainMenu() {
            // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
            currentCategory = '';
            currentLevel = 1;
            score = 0;
            levelScore = 0;
            completedLevels = [];
            usedWords = [];
            levelWords = [];
            canSelect = true;

            // ÈöêËóèÊâÄÊúâÁïåÈù¢
            gameArea.classList.remove('active');
            levelInfo.style.display = 'none';
            levelSelector.style.display = 'none';
            menuBtn.style.display = 'none';
            notebookBtn.style.display = 'none';

            // ÊòæÁ§∫Á±ªÂà´ÈÄâÊã©Âô®
            categorySelector.style.display = 'block';

            // ÈöêËóèÊâÄÊúâÊèêÁ§∫‰ø°ÊÅØ
            hideAllMessages();
        }

        // ÈöêËóèÊâÄÊúâÊèêÁ§∫‰ø°ÊÅØ
        function hideAllMessages() {
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');
            successCelebration.classList.remove('show');
            resultDisplay.classList.remove('show');
        }

        // ÈÄâÊã©Á±ªÂà´
        function selectCategory(category) {
            currentCategory = category;
            currentLevel = 1;
            score = 0;
            completedLevels = [];
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // ÈöêËóèÁ±ªÂà´ÈÄâÊã©Âô®ÔºåÊòæÁ§∫ÂÖ≥Âç°ÈÄâÊã©Âô®
            categorySelector.style.display = 'none';
            levelSelector.style.display = 'block';
            menuBtn.style.display = 'block';
            notebookBtn.style.display = 'block';
            
            // ÁîüÊàêÂÖ≥Âç°ÊåâÈíÆ
            generateLevelButtons();
        }

        // ÁîüÊàêÂÖ≥Âç°ÊåâÈíÆ
        function generateLevelButtons() {
            levelButtons.innerHTML = '';
            const maxLevels = Math.min(15, Math.floor(gameData[currentCategory].length / 5));
            
            for (let i = 1; i <= maxLevels; i++) {
                const levelBtn = document.createElement('button');
                levelBtn.className = 'level-btn';
                levelBtn.textContent = `Á¨¨${i}ÂÖ≥`;
                
                if (completedLevels.includes(i)) {
                    levelBtn.classList.add('completed');
                } else if (i > 1 && !completedLevels.includes(i - 1)) {
                    levelBtn.classList.add('locked');
                } else {
                    levelBtn.addEventListener('click', () => startLevel(i));
                }
                
                levelButtons.appendChild(levelBtn);
            }
        }

        // ÂºÄÂßãÂÖ≥Âç°
        function startLevel(level) {
            currentLevel = level;
            levelScore = 0;
            usedWords = [];
            canSelect = true;
            
            // ËÆ°ÁÆóÂΩìÂâçÂÖ≥Âç°ÁöÑÂçïËØçÊï∞Èáè
            const wordsInLevel = 5 + level; // Á¨¨1ÂÖ≥6‰∏™ÂçïËØçÔºåÁ¨¨2ÂÖ≥7‰∏™ÂçïËØç...
            
            // Ëé∑ÂèñÂΩìÂâçÁ±ªÂà´ÁöÑÊâÄÊúâÂçïËØç
            const categoryWords = [...gameData[currentCategory]];
            
            // ÈöèÊú∫ÈÄâÊã©ÂΩìÂâçÂÖ≥Âç°ÁöÑÂçïËØç
            levelWords = categoryWords
                .sort(() => Math.random() - 0.5)
                .slice(0, wordsInLevel);
            
            // Êõ¥Êñ∞UI
            updateLevelInfo();
            
            // ÈöêËóèÂÖ≥Âç°ÈÄâÊã©Âô®ÔºåÊòæÁ§∫Ê∏∏ÊàèÂå∫Âüü
            levelSelector.style.display = 'none';
            levelInfo.style.display = 'flex';
            gameArea.classList.add('active');
            
            // ÈöêËóèÊâÄÊúâÊèêÁ§∫‰ø°ÊÅØ
            hideAllMessages();
            
            // ÂºÄÂßãÁ¨¨‰∏Ä‰∏™ÂçïËØç
            nextWord();
        }

        // Êõ¥Êñ∞ÂÖ≥Âç°‰ø°ÊÅØ
        function updateLevelInfo() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('currentProgress').textContent = usedWords.length;
            document.getElementById('totalWords').textContent = levelWords.length;
            document.getElementById('score').textContent = score;
        }

        // Ëé∑Âèñ‰∏ã‰∏Ä‰∏™ÂçïËØç
        function nextWord() {
            const availableWords = levelWords.filter(word => !usedWords.includes(word.word));
            
            if (availableWords.length === 0) {
                // ÂÖ≥Âç°ÂÆåÊàê
                completeLevel();
                return;
            }
            
            // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÂçïËØç
            const randomIndex = Math.floor(Math.random() * availableWords.length);
            currentWord = availableWords[randomIndex];
            usedWords.push(currentWord.word);
            
         
            
            // ÈáçÁΩÆÈÄâÊã©Áä∂ÊÄÅ
            canSelect = true;
         
            
            // ÈöêËóèÁªìÊûúÊòæÁ§∫ÂíåÊèêÁ§∫‰ø°ÊÅØ
            hideAllMessages();
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            updateLevelInfo();
            
            // ÊòæÁ§∫ÂõæÊ†áÈÄâÈ°π
            displayIconOptions();
        }

        // ÊòæÁ§∫ÂõæÊ†áÈÄâÈ°π
        function displayIconOptions() {
            iconsGrid.innerHTML = '';
            
            // ÈöèÊú∫ÈÄâÊã©3‰∏™ÈîôËØØÈÄâÈ°π
            const wrongOptions = gameData[currentCategory]
                .filter(word => word.word !== currentWord.word)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3);
            
            // ÂàõÂª∫ÈÄâÈ°πÊï∞ÁªÑÔºàÊ≠£Á°ÆÁ≠îÊ°à + 3‰∏™ÈîôËØØÁ≠îÊ°àÔºâ
            const options = [currentWord, ...wrongOptions];
            
            // Êâì‰π±ÈÄâÈ°πÈ°∫Â∫è
            options.sort(() => Math.random() - 0.5);
            
            // ÂàõÂª∫ÂõæÊ†áÈÄâÈ°π
            options.forEach((option, index) => {
                const iconOption = document.createElement('div');
                iconOption.className = 'icon-option';
                iconOption.innerHTML = `
                    <div class="icon-emoji">${option.icon}</div>
                    <div class="icon-label">${option.chinese}</div>
                `;
                
                iconOption.addEventListener('click', () => {
                    if (canSelect) {
                        checkAnswer(option, iconOption);
                    }
                });
                
                iconsGrid.appendChild(iconOption);
            });
        }

        // Ê£ÄÊü•Á≠îÊ°à
        function checkAnswer(selectedWord, selectedElement) {
            if (!canSelect) {
                return;
            }
            
            if (selectedWord.word === currentWord.word) {
                // Ê≠£Á°ÆÁ≠îÊ°à
                canSelect = false;
                selectedElement.classList.add('correct');
                levelScore++;
                score++;
                updateLevelInfo();
                
                // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫ÂíåÂ∫ÜÁ•ùÂä®Áîª
                showSuccessMessage();
                showSuccessCelebration();
                
                // ÊòæÁ§∫ÁªìÊûú
                setTimeout(() => {
                    showResult();
                }, 2000);
            } else {
                // ÈîôËØØÁ≠îÊ°à
                canSelect = false;
                selectedElement.classList.add('incorrect');
                
                // ÊòæÁ§∫ÈîôËØØÊèêÁ§∫
                showErrorMessage();
                
                // 2ÁßíÂêéÁßªÈô§ÈîôËØØÊ†∑ÂºèÔºåÂÖÅËÆ∏ÈáçÊñ∞ÈÄâÊã©
                setTimeout(() => {
                    selectedElement.classList.remove('incorrect');
                    hideErrorMessage();
                    canSelect = true; // ÈáçÊñ∞ÂêØÁî®ÈÄâÊã©Áä∂ÊÄÅ
                }, 2000);
            }
        }

        // ÊòæÁ§∫ÈîôËØØÊèêÁ§∫
        function showErrorMessage() {
            errorMessage.classList.add('show');
            
            // Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨
            addToWrongWords();
            
            setTimeout(() => {
                errorMessage.classList.remove('show');
            }, 2000);
        }

        // ÈöêËóèÈîôËØØÊèêÁ§∫
        function hideErrorMessage() {
            errorMessage.classList.remove('show');
        }

        // Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨
        function addToWrongWords() {
            // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®
            const exists = wrongWords.some(word => 
                word.word === currentWord.word && word.category === currentCategory
            );
            
            if (!exists) {
                wrongWords.push({
                    word: currentWord.word,
                    chinese: currentWord.chinese,
                    icon: currentWord.icon,
                    category: currentCategory,
                    timestamp: new Date().toLocaleString()
                });
                
                // ÊòæÁ§∫Ê∑ªÂä†ÊàêÂäüÊèêÁ§∫
                showAddToNotebookMessage();
            }
        }

        // ÊòæÁ§∫Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨ÊèêÁ§∫
        function showAddToNotebookMessage() {
            // ÂàõÂª∫‰∏¥Êó∂ÊèêÁ§∫
            const tempMessage = document.createElement('div');
            tempMessage.style.cssText = `
                position: fixed;
                top: 70px;
                right: 20px;
                background: linear-gradient(135deg, #9c88ff 0%, #8c7ae6 100%);
                color: white;
                padding: 10px 20px;
                border-radius: 15px;
                font-size: 0.9em;
                z-index: 1002;
                animation: slideInRight 0.5s ease-out;
            `;
            tempMessage.textContent = '‚úÖ Â∑≤Ê∑ªÂä†Âà∞ÈîôÈ¢òÊú¨';
            document.body.appendChild(tempMessage);
            
            setTimeout(() => {
                tempMessage.remove();
            }, 2000);
        }

        // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
        function showSuccessMessage() {
            successMessage.classList.add('show');
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 2000);
        }

        // ÊòæÁ§∫ÊàêÂäüÂ∫ÜÁ•ùÂä®Áîª
        function showSuccessCelebration() {
            successCelebration.classList.add('show');
            successCelebration.innerHTML = '';
            
            // ÂàõÂª∫Â§ö‰∏™Ëä±Êúµ
            const flowers = ['üå∏', 'üå∫', 'üåª', 'üå∑', 'üåπ', 'üåº', 'üåø', 'üçÄ'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                    flower.style.left = Math.random() * 100 + '%';
                    flower.style.animationDelay = Math.random() * 2 + 's';
                    successCelebration.appendChild(flower);
                }, i * 100);
            }
            
            // 3ÁßíÂêéÈöêËóèÂ∫ÜÁ•ùÂä®Áîª
            setTimeout(() => {
                successCelebration.classList.remove('show');
            }, 3000);
        }

        // ÊòæÁ§∫ÁªìÊûú
        function showResult() {
            wordDisplay.innerHTML = `${currentWord.icon} ${currentWord.word}`;
            chineseDisplay.textContent = currentWord.chinese;
            resultDisplay.classList.add('show');
        }

        // Êí≠ÊîæÂçïËØçÂ£∞Èü≥
        function playWordSound() {
            console.log('playWordSound called');
            console.log('currentWord:', currentWord);
            
            if (!currentWord || !currentWord.word) {
                console.error('No current word to play');
                return;
            }
            
            console.log('Word to play:', currentWord.word);
            
            if ('speechSynthesis' in window) {
                console.log('Speech synthesis available');
                
                // Áõ¥Êé•ÂèñÊ∂à‰ªª‰ΩïÊ≠£Âú®Êí≠ÊîæÁöÑËØ≠Èü≥
                speechSynthesis.cancel();
                
                // Âª∂ËøüÊâßË°å‰ª•Á°Æ‰øùËØ≠Èü≥ÂàóË°®Â∑≤Âä†ËΩΩ
                setTimeout(() => {
                    // Ëé∑ÂèñÂèØÁî®ËØ≠Èü≥
                    const voices = speechSynthesis.getVoices();
                    console.log('Available voices:', voices.length);
                    
                    if (voices.length === 0) {
                        console.error('No voices available');
                        alert('ËØ≠Èü≥ÂêàÊàêÂäüËÉΩÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÂÜçËØï');
                        return;
                    }
                    
                    // Êü•ÊâæËã±ÊñáËØ≠Èü≥
                    const englishVoice = voices.find(voice => 
                        voice.lang.startsWith('en-') && voice.name.includes('Google')
                    ) || voices.find(voice => voice.lang.startsWith('en-'));
                    
                    const utterance = new SpeechSynthesisUtterance(currentWord.word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1;
                    utterance.volume = 1;
                    
                    if (englishVoice) {
                        utterance.voice = englishVoice;
                        console.log('Using voice:', englishVoice.name);
                    }
                    
                    console.log('Utterance created:', utterance);
                    
                    // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
                    utterance.onstart = () => {
                        console.log('Speech started');
                    };
                    
                    utterance.onend = () => {
                        console.log('Speech ended');
                    };
                    
                    utterance.onerror = (event) => {
                        console.error('Speech error:', event.error, event.message);
                    };
                    
                    // Â∞ùËØïÊí≠Êîæ
                    try {
                        speechSynthesis.speak(utterance);
                        console.log('Speech command sent');
                    } catch (error) {
                        console.error('Error speaking:', error);
                    }
                }, 200); // Á≠âÂæÖ200msÁ°Æ‰øùËØ≠Èü≥ÂàóË°®Âä†ËΩΩÂÆåÊàê
                
            } else {
                console.error('Speech synthesis not available');
                alert('ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÂêàÊàêÂäüËÉΩ');
            }
        }
        
        // ÂàùÂßãÂåñËØ≠Èü≥ÂêàÊàê
        function initSpeechSynthesis() {
            console.log('Initializing speech synthesis...');
            
            if ('speechSynthesis' in window) {
                // Á≠âÂæÖËØ≠Èü≥ÂàóË°®Âä†ËΩΩÂÆåÊàê
                const loadVoices = () => {
                    const voices = speechSynthesis.getVoices();
                    console.log('Voices loaded:', voices.length);
                    console.log('Available voices:', voices.map(v => `${v.name} (${v.lang})`));
                    
                    // Êü•ÊâæÂπ∂ËÆæÁΩÆÈªòËÆ§Ëã±ÊñáËØ≠Èü≥
                    const englishVoice = voices.find(voice => 
                        voice.lang.startsWith('en-') && voice.name.includes('Google')
                    ) || voices.find(voice => voice.lang.startsWith('en-'));
                    
                    if (englishVoice) {
                        console.log('Default English voice:', englishVoice.name);
                    }
                };
                
                // Ê£ÄÊü•ËØ≠Èü≥ÂàóË°®ÊòØÂê¶Â∑≤Âä†ËΩΩ
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) {
                    // Á≠âÂæÖËØ≠Èü≥ÂàóË°®Âä†ËΩΩ
                    speechSynthesis.onvoiceschanged = loadVoices;
                } else {
                    // ËØ≠Èü≥ÂàóË°®Â∑≤Âä†ËΩΩÔºåÁõ¥Êé•Â§ÑÁêÜ
                    loadVoices();
                }
            } else {
                console.error('Speech synthesis not supported');
            }
        }

        // ÂÆåÊàêÂÖ≥Âç°
        function completeLevel() {
            // Ê†áËÆ∞ÂÖ≥Âç°ÂÆåÊàê
            if (!completedLevels.includes(currentLevel)) {
                completedLevels.push(currentLevel);
            }
            
            // ËÆ°ÁÆóÊ≠£Á°ÆÁéá
            const accuracy = Math.round((levelScore / levelWords.length) * 100);
            
            // ÊòæÁ§∫ÂÆåÊàêÂºπÁ™ó
            document.getElementById('completedLevel').textContent = currentLevel;
            document.getElementById('completedScore').textContent = levelScore;
            document.getElementById('completedTotal').textContent = levelWords.length;
            document.getElementById('accuracy').textContent = accuracy;
            
            levelComplete.classList.add('show');
        }

        // ‰∏ã‰∏ÄÂÖ≥
        function nextLevel() {
            levelComplete.classList.remove('show');
            
            // ËøîÂõûÂÖ≥Âç°ÈÄâÊã©
            gameArea.classList.remove('active');
            levelInfo.style.display = 'none';
            levelSelector.style.display = 'block';
            
            // Êõ¥Êñ∞ÂÖ≥Âç°ÊåâÈíÆ
            generateLevelButtons();
        }

        // ÊòæÁ§∫ÈîôÈ¢òÊú¨
        function showNotebook() {
            updateNotebookContent();
            notebookModal.classList.add('show');
        }

        // ÈöêËóèÈîôÈ¢òÊú¨
        function hideNotebook() {
            notebookModal.classList.remove('show');
        }

        // Êõ¥Êñ∞ÈîôÈ¢òÊú¨ÂÜÖÂÆπ
        function updateNotebookContent() {
            if (wrongWords.length === 0) {
                notebookContent.innerHTML = '<div class="notebook-empty">ÊöÇÊó†ÈîôÈ¢òÔºåÁªßÁª≠Âä†Ê≤πÔºÅ</div>';
            } else {
                notebookContent.innerHTML = wrongWords.map((word, index) => `
                    <div class="notebook-item">
                        <div class="notebook-word">${word.icon} ${word.word}</div>
                        <div class="notebook-chinese">${word.chinese}</div>
                        <div class="notebook-category">Á±ªÂà´: ${getCategoryName(word.category)} | Ê∑ªÂä†Êó∂Èó¥: ${word.timestamp}</div>
                    </div>
                `).join('');
            }
        }

        // Ëé∑ÂèñÁ±ªÂà´‰∏≠ÊñáÂêç
        function getCategoryName(category) {
            const categoryNames = {
                animals: 'Âä®Áâ©',
                vehicles: '‰∫§ÈÄöÂ∑•ÂÖ∑',
                fruits: 'Ê∞¥Êûú',
                colors: 'È¢úËâ≤',
                numbers: 'Êï∞Â≠ó',
                family: 'ÂÆ∂Â∫≠'
            };
            return categoryNames[category] || category;
        }

        // ÂàùÂßãÂåñÊ∏∏Êàè
        initGame();
    </script>
</body>
</html>