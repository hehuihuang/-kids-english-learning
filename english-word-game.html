<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­å•è¯é—¯å…³æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .menu-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .notebook-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #9c88ff 0%, #8c7ae6 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .notebook-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 136, 255, 0.4);
        }

        .game-header {
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 10px;
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            color: white;
        }

        .level-display {
            font-size: 1.3em;
            font-weight: bold;
        }

        .progress-display {
            font-size: 1.1em;
        }

        .score-display {
            font-size: 1.1em;
        }

        .level-selector {
            margin-bottom: 30px;
        }

        .level-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            margin: 8px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .level-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .level-btn.completed {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }

        .level-btn.locked {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .level-btn.locked::after {
            content: 'ğŸ”’';
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
        }

        .level-btn.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .audio-controls {
            margin-bottom: 30px;
        }

        .play-sound-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .play-sound-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .icons-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .icon-option {
            border: 3px solid #ddd;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 160px;
            position: relative;
            overflow: hidden;
        }

        .icon-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .icon-option:hover::before {
            left: 100%;
        }

        .icon-option:hover {
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .icon-option.correct {
            border-color: #28a745;
            box-shadow: 0 0 25px rgba(40, 167, 69, 0.4);
            background: linear-gradient(135deg, #f8fff9 0%, #e8f5e8 100%);
            animation: correctPulse 0.6s ease-in-out;
        }

        .icon-option.incorrect {
            border-color: #dc3545;
            animation: shake 0.6s ease-in-out;
            background: linear-gradient(135deg, #fff8f8 0%, #ffe8e8 100%);
        }

        .icon-option.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .icon-emoji {
            font-size: 3.5em;
            margin-bottom: 8px;
            transition: transform 0.3s ease;
        }

        .icon-option:hover .icon-emoji {
            transform: scale(1.1);
        }

        .icon-label {
            font-size: 1.1em;
            color: #666;
            font-weight: 500;
        }

        .result-display {
            display: none;
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border-left: 5px solid #28a745;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .result-display.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .word-display {
            font-size: 2.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .chinese-display {
            font-size: 1.5em;
            color: #666;
            margin-bottom: 20px;
        }

        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .level-complete {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .level-complete.show {
            display: flex;
        }

        .complete-modal {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: modalPop 0.5s ease-out;
        }

        @keyframes modalPop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .complete-title {
            font-size: 2.5em;
            color: #28a745;
            margin-bottom: 20px;
        }

        .complete-stats {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }

        .continue-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }

        .continue-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .speaker-icon {
            width: 20px;
            height: 20px;
        }

        .category-selector {
            margin-bottom: 30px;
        }

        .category-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .category-btn.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .error-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            z-index: 999;
            animation: errorShake 0.6s ease-in-out;
        }

        .error-message.show {
            display: block;
        }

        @keyframes errorShake {
            0%, 100% { transform: translate(-50%, -50%) translateX(0); }
            25% { transform: translate(-50%, -50%) translateX(-10px); }
            75% { transform: translate(-50%, -50%) translateX(10px); }
        }

        .success-celebration {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 998;
        }

        .success-celebration.show {
            display: block;
        }

        .flower {
            position: absolute;
            font-size: 2em;
            animation: flowerFall 3s ease-out forwards;
        }

        @keyframes flowerFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .success-message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 999;
            animation: successBounce 1s ease-in-out;
        }

        .success-message.show {
            display: block;
        }

        @keyframes successBounce {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notebook-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }

        .notebook-modal.show {
            display: flex;
        }

        .notebook-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalPop 0.5s ease-out;
        }

        .notebook-title {
            font-size: 2em;
            color: #8c7ae6;
            margin-bottom: 20px;
        }

        .notebook-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            text-align: left;
            border-left: 4px solid #8c7ae6;
        }

        .notebook-word {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .notebook-chinese {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 5px;
        }

        .notebook-category {
            font-size: 0.9em;
            color: #8c7ae6;
            font-weight: bold;
        }

        .close-notebook-btn {
            background: linear-gradient(135deg, #8c7ae6 0%, #9c88ff 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .close-notebook-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(140, 122, 230, 0.4);
        }

        .notebook-empty {
            color: #666;
            font-size: 1.2em;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .icons-grid {
                grid-template-columns: 1fr;
            }
            
            .game-title {
                font-size: 2em;
            }
            
            .icon-emoji {
                font-size: 3em;
            }
            
            .level-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .menu-btn {
                top: 10px;
                right: 10px;
                padding: 8px 16px;
                font-size: 0.8em;
            }
            
            .notebook-btn {
                top: 10px;
                left: 10px;
                padding: 8px 16px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <button class="notebook-btn" id="notebookBtn" style="display: none;">ğŸ“š é”™é¢˜æœ¬</button>
        <button class="menu-btn" id="menuBtn" style="display: none;">ğŸ  ä¸»èœå•</button>
        
        <div class="game-header">
            <h1 class="game-title">ğŸ¯ å•è¯å›¾æ ‡é—¯å…³æ¸¸æˆ</h1>
            
            <div class="category-selector" id="categorySelector">
                <h3>é€‰æ‹©ç±»åˆ«:</h3>
                <button class="category-btn" data-category="animals">ğŸ± åŠ¨ç‰©</button>
                <button class="category-btn" data-category="vehicles">ğŸš— äº¤é€šå·¥å…·</button>
                <button class="category-btn" data-category="fruits">ğŸ æ°´æœ</button>
                <button class="category-btn" data-category="colors">ğŸ¨ é¢œè‰²</button>
                <button class="category-btn" data-category="numbers">ğŸ”¢ æ•°å­—</button>
                <button class="category-btn" data-category="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­</button>
            </div>

            <div class="level-selector" id="levelSelector" style="display: none;">
                <h3>é€‰æ‹©å…³å¡:</h3>
                <div id="levelButtons"></div>
            </div>
        </div>

        <div class="level-info" id="levelInfo" style="display: none;">
            <div class="level-display">ç¬¬ <span id="currentLevel">1</span> å…³</div>
            <div class="progress-display">è¿›åº¦: <span id="currentProgress">0</span> / <span id="totalWords">6</span></div>
            <div class="score-display">å¾—åˆ†: <span id="score">0</span></div>
        </div>

        <div class="game-area" id="gameArea">
            <div class="audio-controls">
                <button class="play-sound-btn" id="playSoundBtn">
                    <svg class="speaker-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    æ’­æ”¾å•è¯
                </button>
            </div>

            <div class="icons-grid" id="iconsGrid">
                <!-- å›¾æ ‡é€‰é¡¹å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <div class="result-display" id="resultDisplay">
                <div class="word-display" id="wordDisplay"></div>
                <div class="chinese-display" id="chineseDisplay"></div>
                <button class="next-btn" id="nextBtn">ä¸‹ä¸€ä¸ªå•è¯</button>
            </div>
        </div>
    </div>

    <!-- é”™è¯¯æç¤º -->
    <div class="error-message" id="errorMessage">
        âŒ é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼
    </div>

    <!-- æˆåŠŸæç¤º -->
    <div class="success-message" id="successMessage">
        ğŸ‰ é€‰æ‹©æ­£ç¡®ï¼å¤ªæ£’äº†ï¼
    </div>

    <!-- æˆåŠŸåº†ç¥åŠ¨ç”» -->
    <div class="success-celebration" id="successCelebration"></div>

    <!-- å…³å¡å®Œæˆå¼¹çª— -->
    <div class="level-complete" id="levelComplete">
        <div class="complete-modal">
            <div class="complete-title">ğŸ‰ å…³å¡å®Œæˆ!</div>
            <div class="complete-stats">
                <div>ç¬¬ <span id="completedLevel">1</span> å…³</div>
                <div>å¾—åˆ†: <span id="completedScore">0</span> / <span id="completedTotal">0</span></div>
                <div>æ­£ç¡®ç‡: <span id="accuracy">0</span>%</div>
            </div>
            <button class="continue-btn" id="continueBtn">ç»§ç»­ä¸‹ä¸€å…³</button>
        </div>
    </div>

    <!-- é”™é¢˜æœ¬å¼¹çª— -->
    <div class="notebook-modal" id="notebookModal">
        <div class="notebook-content">
            <div class="notebook-title">ğŸ“š æˆ‘çš„é”™é¢˜æœ¬</div>
            <div id="notebookContent">
                <div class="notebook-empty">æš‚æ— é”™é¢˜ï¼Œç»§ç»­åŠ æ²¹ï¼</div>
            </div>
            <button class="close-notebook-btn" id="closeNotebookBtn">å…³é—­</button>
        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®
        const gameData = {
            animals: [
                { word: 'cat', chinese: 'çŒ«', icon: 'ğŸ±' },
                { word: 'dog', chinese: 'ç‹—', icon: 'ğŸ¶' },
                { word: 'elephant', chinese: 'å¤§è±¡', icon: 'ğŸ˜' },
                { word: 'lion', chinese: 'ç‹®å­', icon: 'ğŸ¦' },
                { word: 'tiger', chinese: 'è€è™', icon: 'ğŸ¯' },
                { word: 'rabbit', chinese: 'å…”å­', icon: 'ğŸ°' },
                { word: 'bird', chinese: 'é¸Ÿ', icon: 'ğŸ¦' },
                { word: 'fish', chinese: 'é±¼', icon: 'ğŸ ' },
                { word: 'monkey', chinese: 'çŒ´å­', icon: 'ğŸµ' },
                { word: 'panda', chinese: 'ç†ŠçŒ«', icon: 'ğŸ¼' },
                { word: 'pig', chinese: 'çŒª', icon: 'ğŸ·' },
                { word: 'cow', chinese: 'ç‰›', icon: 'ğŸ®' },
                { word: 'horse', chinese: 'é©¬', icon: 'ğŸ´' },
                { word: 'sheep', chinese: 'ç¾Š', icon: 'ğŸ‘' },
                { word: 'mouse', chinese: 'è€é¼ ', icon: 'ğŸ­' },
                { word: 'bear', chinese: 'ç†Š', icon: 'ğŸ»' },
                { word: 'wolf', chinese: 'ç‹¼', icon: 'ğŸº' },
                { word: 'fox', chinese: 'ç‹ç‹¸', icon: 'ğŸ¦Š' },
                { word: 'deer', chinese: 'é¹¿', icon: 'ğŸ¦Œ' },
                { word: 'zebra', chinese: 'æ–‘é©¬', icon: 'ğŸ¦“' }
            ],
            vehicles: [
                { word: 'car', chinese: 'æ±½è½¦', icon: 'ğŸš—' },
                { word: 'bus', chinese: 'å…¬äº¤è½¦', icon: 'ğŸšŒ' },
                { word: 'train', chinese: 'ç«è½¦', icon: 'ğŸš‚' },
                { word: 'airplane', chinese: 'é£æœº', icon: 'âœˆï¸' },
                { word: 'boat', chinese: 'èˆ¹', icon: 'ğŸš¤' },
                { word: 'bicycle', chinese: 'è‡ªè¡Œè½¦', icon: 'ğŸš²' },
                { word: 'motorcycle', chinese: 'æ‘©æ‰˜è½¦', icon: 'ğŸï¸' },
                { word: 'truck', chinese: 'å¡è½¦', icon: 'ğŸšš' },
                { word: 'taxi', chinese: 'å‡ºç§Ÿè½¦', icon: 'ğŸš•' },
                { word: 'subway', chinese: 'åœ°é“', icon: 'ğŸš‡' },
                { word: 'helicopter', chinese: 'ç›´å‡æœº', icon: 'ğŸš' },
                { word: 'ship', chinese: 'è½®èˆ¹', icon: 'ğŸš¢' },
                { word: 'rocket', chinese: 'ç«ç®­', icon: 'ğŸš€' },
                { word: 'ambulance', chinese: 'æ•‘æŠ¤è½¦', icon: 'ğŸš‘' },
                { word: 'police', chinese: 'è­¦è½¦', icon: 'ğŸš“' },
                { word: 'fire', chinese: 'æ¶ˆé˜²è½¦', icon: 'ğŸš’' },
                { word: 'tractor', chinese: 'æ‹–æ‹‰æœº', icon: 'ğŸšœ' },
                { word: 'scooter', chinese: 'æ»‘æ¿è½¦', icon: 'ğŸ›´' },
                { word: 'tram', chinese: 'æœ‰è½¨ç”µè½¦', icon: 'ğŸšŠ' },
                { word: 'van', chinese: 'é¢åŒ…è½¦', icon: 'ğŸš' }
            ],
            fruits: [
                { word: 'apple', chinese: 'è‹¹æœ', icon: 'ğŸ' },
                { word: 'banana', chinese: 'é¦™è•‰', icon: 'ğŸŒ' },
                { word: 'orange', chinese: 'æ©™å­', icon: 'ğŸŠ' },
                { word: 'grape', chinese: 'è‘¡è„', icon: 'ğŸ‡' },
                { word: 'strawberry', chinese: 'è‰è“', icon: 'ğŸ“' },
                { word: 'watermelon', chinese: 'è¥¿ç“œ', icon: 'ğŸ‰' },
                { word: 'pineapple', chinese: 'è è', icon: 'ğŸ' },
                { word: 'peach', chinese: 'æ¡ƒå­', icon: 'ğŸ‘' },
                { word: 'cherry', chinese: 'æ¨±æ¡ƒ', icon: 'ğŸ’' },
                { word: 'mango', chinese: 'èŠ’æœ', icon: 'ğŸ¥­' },
                { word: 'coconut', chinese: 'æ¤°å­', icon: 'ğŸ¥¥' },
                { word: 'lemon', chinese: 'æŸ æª¬', icon: 'ğŸ‹' },
                { word: 'pear', chinese: 'æ¢¨', icon: 'ğŸ' },
                { word: 'kiwi', chinese: 'çŒ•çŒ´æ¡ƒ', icon: 'ğŸ¥' },
                { word: 'avocado', chinese: 'ç‰›æ²¹æœ', icon: 'ğŸ¥‘' },
                { word: 'tomato', chinese: 'ç•ªèŒ„', icon: 'ğŸ…' },
                { word: 'cucumber', chinese: 'é»„ç“œ', icon: 'ğŸ¥’' },
                { word: 'carrot', chinese: 'èƒ¡èåœ', icon: 'ğŸ¥•' },
                { word: 'corn', chinese: 'ç‰ç±³', icon: 'ğŸŒ½' },
                { word: 'broccoli', chinese: 'è¥¿å…°èŠ±', icon: 'ğŸ¥¦' }
            ],
            colors: [
                { word: 'red', chinese: 'çº¢è‰²', icon: 'ğŸ”´' },
                { word: 'blue', chinese: 'è“è‰²', icon: 'ğŸ”µ' },
                { word: 'green', chinese: 'ç»¿è‰²', icon: 'ğŸŸ¢' },
                { word: 'yellow', chinese: 'é»„è‰²', icon: 'ğŸŸ¡' },
                { word: 'purple', chinese: 'ç´«è‰²', icon: 'ğŸŸ£' },
                { word: 'orange', chinese: 'æ©™è‰²', icon: 'ğŸŸ ' },
                { word: 'black', chinese: 'é»‘è‰²', icon: 'âš«' },
                { word: 'white', chinese: 'ç™½è‰²', icon: 'âšª' },
                { word: 'pink', chinese: 'ç²‰è‰²', icon: 'ğŸ©·' },
                { word: 'brown', chinese: 'æ£•è‰²', icon: 'ğŸ¤' },
                { word: 'gray', chinese: 'ç°è‰²', icon: 'âš«' },
                { word: 'gold', chinese: 'é‡‘è‰²', icon: 'ğŸŸ¡' },
                { word: 'silver', chinese: 'é“¶è‰²', icon: 'âšª' },
                { word: 'cyan', chinese: 'é’è‰²', icon: 'ğŸ”µ' },
                { word: 'magenta', chinese: 'æ´‹çº¢', icon: 'ğŸŸ£' },
                { word: 'lime', chinese: 'é…¸æ©™', icon: 'ğŸŸ¢' },
                { word: 'navy', chinese: 'æµ·å†›è“', icon: 'ğŸ”µ' },
                { word: 'teal', chinese: 'è“ç»¿è‰²', icon: 'ğŸ”µ' },
                { word: 'maroon', chinese: 'æ —è‰²', icon: 'ğŸ¤' },
                { word: 'olive', chinese: 'æ©„æ¦„è‰²', icon: 'ğŸŸ¢' }
            ],
            numbers: [
                { word: 'one', chinese: 'ä¸€', icon: '1ï¸âƒ£' },
                { word: 'two', chinese: 'äºŒ', icon: '2ï¸âƒ£' },
                { word: 'three', chinese: 'ä¸‰', icon: '3ï¸âƒ£' },
                { word: 'four', chinese: 'å››', icon: '4ï¸âƒ£' },
                { word: 'five', chinese: 'äº”', icon: '5ï¸âƒ£' },
                { word: 'six', chinese: 'å…­', icon: '6ï¸âƒ£' },
                { word: 'seven', chinese: 'ä¸ƒ', icon: '7ï¸âƒ£' },
                { word: 'eight', chinese: 'å…«', icon: '8ï¸âƒ£' },
                { word: 'nine', chinese: 'ä¹', icon: '9ï¸âƒ£' },
                { word: 'ten', chinese: 'å', icon: 'ğŸ”Ÿ' },
                { word: 'zero', chinese: 'é›¶', icon: '0ï¸âƒ£' },
                { word: 'hundred', chinese: 'ç™¾', icon: 'ğŸ’¯' },
                { word: 'thousand', chinese: 'åƒ', icon: 'ğŸ”¢' },
                { word: 'million', chinese: 'ç™¾ä¸‡', icon: 'ğŸ’°' },
                { word: 'billion', chinese: 'åäº¿', icon: 'ğŸ’µ' },
                { word: 'first', chinese: 'ç¬¬ä¸€', icon: 'ğŸ¥‡' },
                { word: 'second', chinese: 'ç¬¬äºŒ', icon: 'ğŸ¥ˆ' },
                { word: 'third', chinese: 'ç¬¬ä¸‰', icon: 'ğŸ¥‰' },
                { word: 'fourth', chinese: 'ç¬¬å››', icon: '4ï¸âƒ£' },
                { word: 'fifth', chinese: 'ç¬¬äº”', icon: '5ï¸âƒ£' }
            ],
            family: [
                { word: 'father', chinese: 'çˆ¸çˆ¸', icon: 'ğŸ‘¨' },
                { word: 'mother', chinese: 'å¦ˆå¦ˆ', icon: 'ğŸ‘©' },
                { word: 'brother', chinese: 'å…„å¼Ÿ', icon: 'ğŸ‘¦' },
                { word: 'sister', chinese: 'å§å¦¹', icon: 'ğŸ‘§' },
                { word: 'baby', chinese: 'å©´å„¿', icon: 'ğŸ‘¶' },
                { word: 'grandpa', chinese: 'çˆ·çˆ·', icon: 'ğŸ‘´' },
                { word: 'grandma', chinese: 'å¥¶å¥¶', icon: 'ğŸ‘µ' },
                { word: 'family', chinese: 'å®¶åº­', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' },
                { word: 'boy', chinese: 'ç”·å­©', icon: 'ğŸ‘¦' },
                { word: 'girl', chinese: 'å¥³å­©', icon: 'ğŸ‘§' },
                { word: 'man', chinese: 'ç”·äºº', icon: 'ğŸ‘¨' },
                { word: 'woman', chinese: 'å¥³äºº', icon: 'ğŸ‘©' },
                { word: 'son', chinese: 'å„¿å­', icon: 'ğŸ‘¦' },
                { word: 'daughter', chinese: 'å¥³å„¿', icon: 'ğŸ‘§' },
                { word: 'husband', chinese: 'ä¸ˆå¤«', icon: 'ğŸ‘¨' },
                { word: 'wife', chinese: 'å¦»å­', icon: 'ğŸ‘©' },
                { word: 'uncle', chinese: 'å”å”', icon: 'ğŸ‘¨' },
                { word: 'aunt', chinese: 'é˜¿å§¨', icon: 'ğŸ‘©' },
                { word: 'cousin', chinese: 'å ‚å…„å¼Ÿ', icon: 'ğŸ‘¦' },
                { word: 'nephew', chinese: 'ä¾„å­', icon: 'ğŸ‘¦' }
            ]
        };

        // æ¸¸æˆçŠ¶æ€
        let currentCategory = '';
        let currentLevel = 1;
        let currentWord = null;
        let score = 0;
        let levelScore = 0;
        let completedLevels = [];
        let usedWords = [];
        let levelWords = [];
        let canSelect = true;
        let wrongWords = []; // é”™é¢˜æœ¬æ•°æ®

        // DOM å…ƒç´ 
        const menuBtn = document.getElementById('menuBtn');
        const notebookBtn = document.getElementById('notebookBtn');
        const categorySelector = document.getElementById('categorySelector');
        const levelSelector = document.getElementById('levelSelector');
        const levelButtons = document.getElementById('levelButtons');
        const levelInfo = document.getElementById('levelInfo');
        const gameArea = document.getElementById('gameArea');
        const iconsGrid = document.getElementById('iconsGrid');
        const resultDisplay = document.getElementById('resultDisplay');
        const wordDisplay = document.getElementById('wordDisplay');
        const chineseDisplay = document.getElementById('chineseDisplay');
        const playSoundBtn = document.getElementById('playSoundBtn');
        const nextBtn = document.getElementById('nextBtn');
        const levelComplete = document.getElementById('levelComplete');
        const continueBtn = document.getElementById('continueBtn');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const successCelebration = document.getElementById('successCelebration');
        const notebookModal = document.getElementById('notebookModal');
        const notebookContent = document.getElementById('notebookContent');
        const closeNotebookBtn = document.getElementById('closeNotebookBtn');

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
            initSpeechSynthesis();
            
            // ç»‘å®šç±»åˆ«æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.dataset.category;
                    selectCategory(category);
                });
            });

            // ç»‘å®šæ’­æ”¾å£°éŸ³æŒ‰é’®äº‹ä»¶
            playSoundBtn.addEventListener('click', playWordSound);

            // ç»‘å®šä¸‹ä¸€ä¸ªæŒ‰é’®äº‹ä»¶
            nextBtn.addEventListener('click', nextWord);

            // ç»‘å®šç»§ç»­æŒ‰é’®äº‹ä»¶
            continueBtn.addEventListener('click', nextLevel);

            // ç»‘å®šä¸»èœå•æŒ‰é’®äº‹ä»¶
            menuBtn.addEventListener('click', returnToMainMenu);

            // ç»‘å®šé”™é¢˜æœ¬æŒ‰é’®äº‹ä»¶
            notebookBtn.addEventListener('click', showNotebook);

            // ç»‘å®šå…³é—­é”™é¢˜æœ¬æŒ‰é’®äº‹ä»¶
            closeNotebookBtn.addEventListener('click', hideNotebook);
        }

        // è¿”å›ä¸»èœå•
        function returnToMainMenu() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            currentCategory = '';
            currentLevel = 1;
            score = 0;
            levelScore = 0;
            completedLevels = [];
            usedWords = [];
            levelWords = [];
            canSelect = true;

            // éšè—æ‰€æœ‰ç•Œé¢
            gameArea.classList.remove('active');
            levelInfo.style.display = 'none';
            levelSelector.style.display = 'none';
            menuBtn.style.display = 'none';
            notebookBtn.style.display = 'none';

            // æ˜¾ç¤ºç±»åˆ«é€‰æ‹©å™¨
            categorySelector.style.display = 'block';

            // éšè—æ‰€æœ‰æç¤ºä¿¡æ¯
            hideAllMessages();
        }

        // éšè—æ‰€æœ‰æç¤ºä¿¡æ¯
        function hideAllMessages() {
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');
            successCelebration.classList.remove('show');
            resultDisplay.classList.remove('show');
        }

        // é€‰æ‹©ç±»åˆ«
        function selectCategory(category) {
            currentCategory = category;
            currentLevel = 1;
            score = 0;
            completedLevels = [];
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // éšè—ç±»åˆ«é€‰æ‹©å™¨ï¼Œæ˜¾ç¤ºå…³å¡é€‰æ‹©å™¨
            categorySelector.style.display = 'none';
            levelSelector.style.display = 'block';
            menuBtn.style.display = 'block';
            notebookBtn.style.display = 'block';
            
            // ç”Ÿæˆå…³å¡æŒ‰é’®
            generateLevelButtons();
        }

        // ç”Ÿæˆå…³å¡æŒ‰é’®
        function generateLevelButtons() {
            levelButtons.innerHTML = '';
            const maxLevels = Math.min(15, Math.floor(gameData[currentCategory].length / 5));
            
            for (let i = 1; i <= maxLevels; i++) {
                const levelBtn = document.createElement('button');
                levelBtn.className = 'level-btn';
                levelBtn.textContent = `ç¬¬${i}å…³`;
                
                if (completedLevels.includes(i)) {
                    levelBtn.classList.add('completed');
                } else if (i > 1 && !completedLevels.includes(i - 1)) {
                    levelBtn.classList.add('locked');
                } else {
                    levelBtn.addEventListener('click', () => startLevel(i));
                }
                
                levelButtons.appendChild(levelBtn);
            }
        }

        // å¼€å§‹å…³å¡
        function startLevel(level) {
            currentLevel = level;
            levelScore = 0;
            usedWords = [];
            canSelect = true;
            
            // è®¡ç®—å½“å‰å…³å¡çš„å•è¯æ•°é‡
            const wordsInLevel = 5 + level; // ç¬¬1å…³6ä¸ªå•è¯ï¼Œç¬¬2å…³7ä¸ªå•è¯...
            
            // è·å–å½“å‰ç±»åˆ«çš„æ‰€æœ‰å•è¯
            const categoryWords = [...gameData[currentCategory]];
            
            // éšæœºé€‰æ‹©å½“å‰å…³å¡çš„å•è¯
            levelWords = categoryWords
                .sort(() => Math.random() - 0.5)
                .slice(0, wordsInLevel);
            
            // æ›´æ–°UI
            updateLevelInfo();
            
            // éšè—å…³å¡é€‰æ‹©å™¨ï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
            levelSelector.style.display = 'none';
            levelInfo.style.display = 'flex';
            gameArea.classList.add('active');
            
            // éšè—æ‰€æœ‰æç¤ºä¿¡æ¯
            hideAllMessages();
            
            // å¼€å§‹ç¬¬ä¸€ä¸ªå•è¯
            nextWord();
        }

        // æ›´æ–°å…³å¡ä¿¡æ¯
        function updateLevelInfo() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('currentProgress').textContent = usedWords.length;
            document.getElementById('totalWords').textContent = levelWords.length;
            document.getElementById('score').textContent = score;
        }

        // è·å–ä¸‹ä¸€ä¸ªå•è¯
        function nextWord() {
            const availableWords = levelWords.filter(word => !usedWords.includes(word.word));
            
            if (availableWords.length === 0) {
                // å…³å¡å®Œæˆ
                completeLevel();
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªå•è¯
            const randomIndex = Math.floor(Math.random() * availableWords.length);
            currentWord = availableWords[randomIndex];
            usedWords.push(currentWord.word);
            
         
            
            // é‡ç½®é€‰æ‹©çŠ¶æ€
            canSelect = true;
         
            
            // éšè—ç»“æœæ˜¾ç¤ºå’Œæç¤ºä¿¡æ¯
            hideAllMessages();
            
            // æ›´æ–°è¿›åº¦
            updateLevelInfo();
            
            // æ˜¾ç¤ºå›¾æ ‡é€‰é¡¹
            displayIconOptions();
        }

        // æ˜¾ç¤ºå›¾æ ‡é€‰é¡¹
        function displayIconOptions() {
            iconsGrid.innerHTML = '';
            
            // éšæœºé€‰æ‹©3ä¸ªé”™è¯¯é€‰é¡¹
            const wrongOptions = gameData[currentCategory]
                .filter(word => word.word !== currentWord.word)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3);
            
            // åˆ›å»ºé€‰é¡¹æ•°ç»„ï¼ˆæ­£ç¡®ç­”æ¡ˆ + 3ä¸ªé”™è¯¯ç­”æ¡ˆï¼‰
            const options = [currentWord, ...wrongOptions];
            
            // æ‰“ä¹±é€‰é¡¹é¡ºåº
            options.sort(() => Math.random() - 0.5);
            
            // åˆ›å»ºå›¾æ ‡é€‰é¡¹
            options.forEach((option, index) => {
                const iconOption = document.createElement('div');
                iconOption.className = 'icon-option';
                iconOption.innerHTML = `
                    <div class="icon-emoji">${option.icon}</div>
                    <div class="icon-label">${option.chinese}</div>
                `;
                
                iconOption.addEventListener('click', () => {
                    if (canSelect) {
                        checkAnswer(option, iconOption);
                    }
                });
                
                iconsGrid.appendChild(iconOption);
            });
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer(selectedWord, selectedElement) {
            if (!canSelect) {
                return;
            }
            
            if (selectedWord.word === currentWord.word) {
                // æ­£ç¡®ç­”æ¡ˆ
                canSelect = false;
                selectedElement.classList.add('correct');
                levelScore++;
                score++;
                updateLevelInfo();
                
                // æ˜¾ç¤ºæˆåŠŸæç¤ºå’Œåº†ç¥åŠ¨ç”»
                showSuccessMessage();
                showSuccessCelebration();
                
                // æ˜¾ç¤ºç»“æœ
                setTimeout(() => {
                    showResult();
                }, 2000);
            } else {
                // é”™è¯¯ç­”æ¡ˆ
                canSelect = false;
                selectedElement.classList.add('incorrect');
                
                // æ˜¾ç¤ºé”™è¯¯æç¤º
                showErrorMessage();
                
                // 2ç§’åç§»é™¤é”™è¯¯æ ·å¼ï¼Œå…è®¸é‡æ–°é€‰æ‹©
                setTimeout(() => {
                    selectedElement.classList.remove('incorrect');
                    hideErrorMessage();
                    canSelect = true; // é‡æ–°å¯ç”¨é€‰æ‹©çŠ¶æ€
                }, 2000);
            }
        }

        // æ˜¾ç¤ºé”™è¯¯æç¤º
        function showErrorMessage() {
            errorMessage.classList.add('show');
            
            // æ·»åŠ åˆ°é”™é¢˜æœ¬
            addToWrongWords();
            
            setTimeout(() => {
                errorMessage.classList.remove('show');
            }, 2000);
        }

        // éšè—é”™è¯¯æç¤º
        function hideErrorMessage() {
            errorMessage.classList.remove('show');
        }

        // æ·»åŠ åˆ°é”™é¢˜æœ¬
        function addToWrongWords() {
            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨
            const exists = wrongWords.some(word => 
                word.word === currentWord.word && word.category === currentCategory
            );
            
            if (!exists) {
                wrongWords.push({
                    word: currentWord.word,
                    chinese: currentWord.chinese,
                    icon: currentWord.icon,
                    category: currentCategory,
                    timestamp: new Date().toLocaleString()
                });
                
                // æ˜¾ç¤ºæ·»åŠ æˆåŠŸæç¤º
                showAddToNotebookMessage();
            }
        }

        // æ˜¾ç¤ºæ·»åŠ åˆ°é”™é¢˜æœ¬æç¤º
        function showAddToNotebookMessage() {
            // åˆ›å»ºä¸´æ—¶æç¤º
            const tempMessage = document.createElement('div');
            tempMessage.style.cssText = `
                position: fixed;
                top: 70px;
                right: 20px;
                background: linear-gradient(135deg, #9c88ff 0%, #8c7ae6 100%);
                color: white;
                padding: 10px 20px;
                border-radius: 15px;
                font-size: 0.9em;
                z-index: 1002;
                animation: slideInRight 0.5s ease-out;
            `;
            tempMessage.textContent = 'âœ… å·²æ·»åŠ åˆ°é”™é¢˜æœ¬';
            document.body.appendChild(tempMessage);
            
            setTimeout(() => {
                tempMessage.remove();
            }, 2000);
        }

        // æ˜¾ç¤ºæˆåŠŸæç¤º
        function showSuccessMessage() {
            successMessage.classList.add('show');
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 2000);
        }

        // æ˜¾ç¤ºæˆåŠŸåº†ç¥åŠ¨ç”»
        function showSuccessCelebration() {
            successCelebration.classList.add('show');
            successCelebration.innerHTML = '';
            
            // åˆ›å»ºå¤šä¸ªèŠ±æœµ
            const flowers = ['ğŸŒ¸', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ·', 'ğŸŒ¹', 'ğŸŒ¼', 'ğŸŒ¿', 'ğŸ€'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    flower.className = 'flower';
                    flower.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                    flower.style.left = Math.random() * 100 + '%';
                    flower.style.animationDelay = Math.random() * 2 + 's';
                    successCelebration.appendChild(flower);
                }, i * 100);
            }
            
            // 3ç§’åéšè—åº†ç¥åŠ¨ç”»
            setTimeout(() => {
                successCelebration.classList.remove('show');
            }, 3000);
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            wordDisplay.innerHTML = `${currentWord.icon} ${currentWord.word}`;
            chineseDisplay.textContent = currentWord.chinese;
            resultDisplay.classList.add('show');
        }

        // æ’­æ”¾å•è¯å£°éŸ³
        function playWordSound() {
            console.log('playWordSound called');
            console.log('currentWord:', currentWord);
            
            if (!currentWord || !currentWord.word) {
                console.error('No current word to play');
                return;
            }
            
            console.log('Word to play:', currentWord.word);
            
            if ('speechSynthesis' in window) {
                console.log('Speech synthesis available');
                
                // ç›´æ¥å–æ¶ˆä»»ä½•æ­£åœ¨æ’­æ”¾çš„è¯­éŸ³
                speechSynthesis.cancel();
                
                // å»¶è¿Ÿæ‰§è¡Œä»¥ç¡®ä¿è¯­éŸ³åˆ—è¡¨å·²åŠ è½½
                setTimeout(() => {
                    // è·å–å¯ç”¨è¯­éŸ³
                    const voices = speechSynthesis.getVoices();
                    console.log('Available voices:', voices.length);
                    
                    if (voices.length === 0) {
                        console.error('No voices available');
                        alert('è¯­éŸ³åˆæˆåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•');
                        return;
                    }
                    
                    // æŸ¥æ‰¾è‹±æ–‡è¯­éŸ³
                    const englishVoice = voices.find(voice => 
                        voice.lang.startsWith('en-') && voice.name.includes('Google')
                    ) || voices.find(voice => voice.lang.startsWith('en-'));
                    
                    const utterance = new SpeechSynthesisUtterance(currentWord.word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1;
                    utterance.volume = 1;
                    
                    if (englishVoice) {
                        utterance.voice = englishVoice;
                        console.log('Using voice:', englishVoice.name);
                    }
                    
                    console.log('Utterance created:', utterance);
                    
                    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                    utterance.onstart = () => {
                        console.log('Speech started');
                    };
                    
                    utterance.onend = () => {
                        console.log('Speech ended');
                    };
                    
                    utterance.onerror = (event) => {
                        console.error('Speech error:', event.error, event.message);
                    };
                    
                    // å°è¯•æ’­æ”¾
                    try {
                        speechSynthesis.speak(utterance);
                        console.log('Speech command sent');
                    } catch (error) {
                        console.error('Error speaking:', error);
                    }
                }, 200); // ç­‰å¾…200msç¡®ä¿è¯­éŸ³åˆ—è¡¨åŠ è½½å®Œæˆ
                
            } else {
                console.error('Speech synthesis not available');
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆåŠŸèƒ½');
            }
        }
        
        // åˆå§‹åŒ–è¯­éŸ³åˆæˆ
        function initSpeechSynthesis() {
            console.log('Initializing speech synthesis...');
            
            if ('speechSynthesis' in window) {
                // ç­‰å¾…è¯­éŸ³åˆ—è¡¨åŠ è½½å®Œæˆ
                const loadVoices = () => {
                    const voices = speechSynthesis.getVoices();
                    console.log('Voices loaded:', voices.length);
                    console.log('Available voices:', voices.map(v => `${v.name} (${v.lang})`));
                    
                    // æŸ¥æ‰¾å¹¶è®¾ç½®é»˜è®¤è‹±æ–‡è¯­éŸ³
                    const englishVoice = voices.find(voice => 
                        voice.lang.startsWith('en-') && voice.name.includes('Google')
                    ) || voices.find(voice => voice.lang.startsWith('en-'));
                    
                    if (englishVoice) {
                        console.log('Default English voice:', englishVoice.name);
                    }
                };
                
                // æ£€æŸ¥è¯­éŸ³åˆ—è¡¨æ˜¯å¦å·²åŠ è½½
                const voices = speechSynthesis.getVoices();
                if (voices.length === 0) {
                    // ç­‰å¾…è¯­éŸ³åˆ—è¡¨åŠ è½½
                    speechSynthesis.onvoiceschanged = loadVoices;
                } else {
                    // è¯­éŸ³åˆ—è¡¨å·²åŠ è½½ï¼Œç›´æ¥å¤„ç†
                    loadVoices();
                }
            } else {
                console.error('Speech synthesis not supported');
            }
        }

        // å®Œæˆå…³å¡
        function completeLevel() {
            // æ ‡è®°å…³å¡å®Œæˆ
            if (!completedLevels.includes(currentLevel)) {
                completedLevels.push(currentLevel);
            }
            
            // è®¡ç®—æ­£ç¡®ç‡
            const accuracy = Math.round((levelScore / levelWords.length) * 100);
            
            // æ˜¾ç¤ºå®Œæˆå¼¹çª—
            document.getElementById('completedLevel').textContent = currentLevel;
            document.getElementById('completedScore').textContent = levelScore;
            document.getElementById('completedTotal').textContent = levelWords.length;
            document.getElementById('accuracy').textContent = accuracy;
            
            levelComplete.classList.add('show');
        }

        // ä¸‹ä¸€å…³
        function nextLevel() {
            levelComplete.classList.remove('show');
            
            // è¿”å›å…³å¡é€‰æ‹©
            gameArea.classList.remove('active');
            levelInfo.style.display = 'none';
            levelSelector.style.display = 'block';
            
            // æ›´æ–°å…³å¡æŒ‰é’®
            generateLevelButtons();
        }

        // æ˜¾ç¤ºé”™é¢˜æœ¬
        function showNotebook() {
            updateNotebookContent();
            notebookModal.classList.add('show');
        }

        // éšè—é”™é¢˜æœ¬
        function hideNotebook() {
            notebookModal.classList.remove('show');
        }

        // æ›´æ–°é”™é¢˜æœ¬å†…å®¹
        function updateNotebookContent() {
            if (wrongWords.length === 0) {
                notebookContent.innerHTML = '<div class="notebook-empty">æš‚æ— é”™é¢˜ï¼Œç»§ç»­åŠ æ²¹ï¼</div>';
            } else {
                notebookContent.innerHTML = wrongWords.map((word, index) => `
                    <div class="notebook-item">
                        <div class="notebook-word">${word.icon} ${word.word}</div>
                        <div class="notebook-chinese">${word.chinese}</div>
                        <div class="notebook-category">ç±»åˆ«: ${getCategoryName(word.category)} | æ·»åŠ æ—¶é—´: ${word.timestamp}</div>
                    </div>
                `).join('');
            }
        }

        // è·å–ç±»åˆ«ä¸­æ–‡å
        function getCategoryName(category) {
            const categoryNames = {
                animals: 'åŠ¨ç‰©',
                vehicles: 'äº¤é€šå·¥å…·',
                fruits: 'æ°´æœ',
                colors: 'é¢œè‰²',
                numbers: 'æ•°å­—',
                family: 'å®¶åº­'
            };
            return categoryNames[category] || category;
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>